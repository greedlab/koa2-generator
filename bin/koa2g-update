#!/usr/bin/env node

var program = require('commander');
var path = require('path');
var fs = require('fs');
var pkg = require('../package.json');

var version = pkg.version;

program
    .version(version)
    .usage('[options]')
    .option('-d, --directory', 'the target directory (defaults to ./)')
    .parse(process.argv);

main();

function updateApplication(directory) {
    var package = path.join(directory, 'package.json');
    fs.exists(package, function (exists) {
        if (exists) {
            installDependencies();
        }
    });
}

function installDependencies() {
    console.log('installDependencies');
}

/**
 * Main program.
 */

function main() {
    // Directory
    var directory = (program.directory && program.directory.length > 0 ) ? program.directory : './';

    // update application
    updateApplication(directory);
}
