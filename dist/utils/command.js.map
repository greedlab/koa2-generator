{"version":3,"sources":["utils/command.js"],"names":[],"mappings":"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","file":"utils/command.js","sourcesContent":["/**\n * Created by Bell on 16/8/8.\n */\n\nconst path = require('path');\nconst child_process = require('child_process');\n\n/**\n * run shell\n *\n * @param command\n * @param options\n * @returns {Promise}\n */\nexport async function run(command, options) {\n    return new Promise(function (resolve, reject) {\n        let cp = child_process.spawn(command, options, {'stdio': 'inherit'});\n        cp.on('close', function (code) {\n            resolve(code);\n        });\n    });\n}\n\n/**\n * npm install dependence\n *\n * @param command\n * @param options\n * @returns {Promise}\n */\nexport async function runNpm(options) {\n    return await run('npm',options);\n}\n\nexport async function installKoa2() {\n    await runNpm(['install', '--save', 'koa@next']);\n    await runNpm(['install', '--save', 'koa-bodyparser@next']);\n    await runNpm(['install', '--save', 'koa-favicon@next']);\n    await runNpm(['install', '--save', 'koa-logger@next']);\n    await runNpm(['install', '--save', 'koa-static@next']);\n}\n\nexport async function installBabel() {\n    await runNpm(['install', '--save-dev', 'babel-core']);\n    await runNpm(['install', '--save-dev', 'babel-register']);\n    await runNpm(['install', '--save-dev', 'babel-preset-es2015']);\n    await runNpm(['install', '--save-dev', 'babel-preset-stage-0']);\n    await runNpm(['install', '--save-dev', 'babel-polyfill']);\n}\n\n\nexport async function installEslint() {\n    await runNpm(['install', '--save-dev', 'eslint']);\n    await runNpm(['install', '--save-dev', 'babel-eslint']);\n    await runNpm(['install', '--save-dev', 'eslint-plugin-react']);\n    await runNpm(['install', '--save-dev', 'babel-preset-stage-0']);\n    await runNpm(['install', '--save-dev', 'babel-polyfill']);\n}\n\nexport async function supportAsync() {\n    await runNpm(['install', '--save-dev', 'babel-plugin-transform-async-to-module-method']);\n}\n\nexport async function installGulp() {\n    await runNpm(['install', '--save-dev', 'gulp']);\n    await runNpm(['install', '--save-dev', 'gulp-babel']);\n    await runNpm(['install', '--save-dev', 'gulp-changed']);\n    await runNpm(['install', '--save-dev', 'gulp-sourcemaps']);\n    await runNpm(['install', '--save-dev', 'gulp-uglify']);\n    await runNpm(['install', '--save-dev', 'gulp-clean-css']);\n    await runNpm(['install', '--save-dev', 'gulp-sass']);\n    await runNpm(['install', '--save-dev', 'gulp-rename']);\n    await runNpm(['install', '--save-dev', 'gulp-imagemin']);\n    await runNpm(['install', '--save-dev', 'imagemin-pngquant']);\n    await runNpm(['install', '--save-dev', 'gulp-livereload']);\n    await runNpm(['install', '--save-dev', 'run-sequence']);\n    await runNpm(['install', '--save-dev', 'gulp-uglify']);\n    await runNpm(['install', '--save-dev', 'gulp-uglify']);\n}\n\nexport async function installNodemon() {\n    await runNpm(['install', '-g', 'nodemon']);\n}\n\nexport async function installPm2() {\n    await runNpm(['install', '-g', 'pm2']);\n}\n\n\nexport async function installArtTemplate() {\n    await runNpm(['install', '--save', 'art-template']);\n}\n\nexport async function installMongoDB() {\n    await runNpm(['install', '--save', 'mongoose']);\n}\n\nexport async function installAllDependencies() {\n    await installKoa2();\n    await installBabel();\n    await supportAsync();\n    await installEslint();\n    await installGulp();\n    await installPm2();\n    await installNodemon();\n    await installArtTemplate();\n    await installMongoDB();\n}\n\nexport async function copy(from,to) {\n    if (from.length > 0 && to.length > 0) {\n        let cwd = process.cwd();\n        let fromPath = path.resolve(cwd, from);\n        let toDirectory = path.resolve(cwd, to);\n        console.log('fromPath :' + fromPath);\n        console.log('toDirectory :' + toDirectory);\n        return await run('cp',['-rf',fromPath,toDirectory]);\n    }\n}\n"],"sourceRoot":"/source/"}