{"version":3,"sources":["utils/command.js"],"names":[],"mappings":"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","file":"utils/command.js","sourcesContent":["/**\n * Created by Bell on 16/8/8.\n */\n\nimport child_process from 'child_process';\n\n/**\n * run shell\n *\n * @param command\n * @param options\n * @returns {Promise}\n */\nexport async function run(command, options) {\n    return new Promise(function (resolve, reject) {\n        let cp = child_process.spawn(command, options, {'stdio': 'inherit'});\n        cp.on('close', function (code) {\n            resolve(code);\n        });\n    });\n}\n\n/**\n * npm install dependence\n *\n * @param command\n * @param options\n * @returns {Promise}\n */\nexport async function runNpm(options) {\n    return run('npm',options);\n}\n\n/**\n * npm init\n */\nexport async function npmInit() {\n    return runNpm(['init']);\n}\n\nexport async function installDebug() {\n    return runNpm(['install', '--save', 'debug']);\n}\n\nexport async function installNodemon() {\n    return runNpm(['install', '-g', 'nodemon']);\n}\n\nexport async function installPm2() {\n    return runNpm(['install', '-g', 'pm2']);\n}\n\nexport async function installFrontDependencies() {\n    // node-gyp\n    await runNpm(['install', '-g', 'node-gyp']);\n\n    // koa2\n    await runNpm(['install', '--save', 'koa@next']);\n    await runNpm(['install', '--save', 'koa-bodyparser@next']);\n    await runNpm(['install', '--save', 'koa-favicon@next']);\n    await runNpm(['install', '--save', 'koa-logger@next']);\n    await runNpm(['install', '--save', 'koa-static@next']);\n\n    // babel\n    await runNpm(['install', '--save', 'babel-polyfill']);\n    await runNpm(['install', '--save-dev', 'babel-core']);\n    await runNpm(['install', '--save-dev', 'babel-eslint']);\n    await runNpm(['install', '--save-dev', 'babel-preset-es2015']);\n    await runNpm(['install', '--save-dev', 'babel-preset-stage-0']);\n    await runNpm(['install', '--save-dev', 'babel-plugin-transform-async-to-module-method']);\n\n    // eslint\n    await runNpm(['install', '--save-dev', 'eslint']);\n    await runNpm(['install', '--save-dev', 'eslint-plugin-react']);\n\n    // gulp\n    await runNpm(['install', '--save-dev', 'gulp']);\n    await runNpm(['install', '--save-dev', 'gulp-babel']);\n    await runNpm(['install', '--save-dev', 'gulp-changed']);\n    await runNpm(['install', '--save-dev', 'gulp-sourcemaps']);\n    await runNpm(['install', '--save-dev', 'gulp-uglify']);\n    await runNpm(['install', '--save-dev', 'gulp-clean-css']);\n    await runNpm(['install', '--save-dev', 'gulp-sass']);\n    await runNpm(['install', '--save-dev', 'gulp-rename']);\n    await runNpm(['install', '--save-dev', 'gulp-imagemin']);\n    await runNpm(['install', '--save-dev', 'gulp-plumber']);\n    await runNpm(['install', '--save-dev', 'gulp-livereload']);\n    await runNpm(['install', '--save-dev', 'gulp-react']);\n    await runNpm(['install', '--save-dev', 'imagemin-pngquant']);\n    await runNpm(['install', '--save-dev', 'imagemin-gifsicle']);\n    await runNpm(['install', '--save-dev', 'run-sequence']);\n\n    // other\n    await runNpm(['install', '--save', 'art-template']);\n    await runNpm(['install', '--save', 'request']);\n\n    await installDebug();\n    await installNodemon();\n    await installPm2();\n}\n\nexport async function installBackDependencies() {\n    // node-gyp\n    await runNpm(['install', '-g', 'node-gyp']);\n\n    // koa2\n    await runNpm(['install', '--save', 'koa@next']);\n    await runNpm(['install', '--save', 'koa-bodyparser@next']);\n    await runNpm(['install', '--save', 'koa-logger@next']);\n    await runNpm(['install', '--save', 'koa-router@next']);\n    await runNpm(['install', '--save', 'koa-convert']);\n\n    // babel\n    await runNpm(['install', '--save', 'babel-polyfill']);\n    await runNpm(['install', '--save-dev', 'babel-core']);\n    await runNpm(['install', '--save-dev', 'babel-eslint']);\n    await runNpm(['install', '--save-dev', 'babel-preset-es2015']);\n    await runNpm(['install', '--save-dev', 'babel-preset-stage-0']);\n    await runNpm(['install', '--save-dev', 'babel-plugin-transform-async-to-module-method']);\n\n    // eslint\n    await runNpm(['install', '--save-dev', 'eslint']);\n    await runNpm(['install', '--save-dev', 'eslint-plugin-react']);\n\n    // gulp\n    await runNpm(['install', '--save-dev', 'gulp']);\n    await runNpm(['install', '--save-dev', 'gulp-babel']);\n    await runNpm(['install', '--save-dev', 'gulp-changed']);\n    await runNpm(['install', '--save-dev', 'gulp-sourcemaps']);\n    await runNpm(['install', '--save-dev', 'gulp-watch']);\n    await runNpm(['install', '--save-dev', 'gulp-rename']);\n    await runNpm(['install', '--save-dev', 'gulp-plumber']);\n    await runNpm(['install', '--save-dev', 'run-sequence']);\n\n    // mongodb\n    await runNpm(['install', '--save', 'mongoose']);\n\n    // redis\n    await runNpm(['install', '--save', 'redis']);\n    \n    // auth\n    await runNpm(['install', '--save', 'koa-passport@next']);\n    await runNpm(['install', '--save', 'passport-local']);\n    await runNpm(['install', '--save', 'jsonwebtoken']);\n\n    // other\n    await runNpm(['install', '--save', 'bcrypt']);\n    await runNpm(['install', '--save', 'bluebird']);\n\n    await installDebug();\n    await installNodemon();\n    await installPm2();\n}\n"],"sourceRoot":"/source/"}